<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="rustdoc"><meta name="description" content="simd-json is a rust port of the simdjson c++ library. It follows most of the design closely with a few exceptions to make it better fit into the rust ecosystem."><meta name="keywords" content="rust, rustlang, rust-lang, simd_json"><title>simd_json - Rust</title><link rel="preload" as="font" type="font/woff2" crossorigin href="../static.files/SourceSerif4-Regular-1f7d512b176f0f72.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../static.files/FiraSans-Regular-018c141bf0843ffd.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../static.files/FiraSans-Medium-8f9a781e4970d388.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../static.files/SourceCodePro-Regular-562dcc5011b6de7d.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../static.files/SourceSerif4-Bold-124a1ca42af929b6.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../static.files/SourceCodePro-Semibold-d899c5a5c4aeb14a.ttf.woff2"><link rel="stylesheet" href="../static.files/normalize-76eba96aa4d2e634.css"><link rel="stylesheet" href="../static.files/rustdoc-cd23e1e4557aa9dd.css" id="mainThemeStyle"><link rel="stylesheet" id="themeStyle" href="../static.files/light-a21928845c7a186a.css"><link rel="stylesheet" disabled href="../static.files/dark-90fc67ff25a42f29.css"><link rel="stylesheet" disabled href="../static.files/ayu-d75a8bbde915b8ed.css"><script id="default-settings" ></script><script src="../static.files/storage-d43fa987303ecbbb.js"></script><script defer src="../crates.js"></script><script defer src="../static.files/main-458bffc4c06ccf37.js"></script><noscript><link rel="stylesheet" href="../static.files/noscript-13285aec31fa243e.css"></noscript><link rel="alternate icon" type="image/png" href="../static.files/favicon-16x16-8b506e7a72182f1c.png"><link rel="alternate icon" type="image/png" href="../static.files/favicon-32x32-422f7d1d52889060.png"><link rel="icon" type="image/svg+xml" href="../static.files/favicon-2c020d218678b618.svg"></head><body class="rustdoc mod crate"><!--[if lte IE 11]><div class="warning">This old browser is unsupported and will most likely display funky things.</div><![endif]--><nav class="mobile-topbar"><button class="sidebar-menu-toggle">&#9776;</button><a class="sidebar-logo" href="../simd_json/index.html"><div class="logo-container"><img class="rust-logo" src="../static.files/rust-logo-151179464ae7ed46.svg" alt="logo"></div></a><h2></h2></nav><nav class="sidebar"><a class="sidebar-logo" href="../simd_json/index.html"><div class="logo-container"><img class="rust-logo" src="../static.files/rust-logo-151179464ae7ed46.svg" alt="logo"></div></a><h2 class="location"><a href="#">Crate simd_json</a></h2><div class="sidebar-elems"><ul class="block"><li class="version">Version 0.7.0</li><li><a id="all-types" href="all.html">All Items</a></li></ul><section><ul class="block"><li><a href="#reexports">Re-exports</a></li><li><a href="#modules">Modules</a></li><li><a href="#macros">Macros</a></li><li><a href="#structs">Structs</a></li><li><a href="#enums">Enums</a></li><li><a href="#functions">Functions</a></li><li><a href="#types">Type Definitions</a></li></ul></section></div></nav><main><div class="width-limiter"><nav class="sub"><form class="search-form"><span></span><input class="search-input" name="search" autocomplete="off" spellcheck="false" placeholder="Click or press ‘S’ to search, ‘?’ for more options…" type="search"><div id="help-button" title="help" tabindex="-1"><a href="../help.html">?</a></div><div id="settings-menu" tabindex="-1"><a href="../settings.html" title="settings"><img width="22" height="22" alt="Change settings" src="../static.files/wheel-5ec35bf9ca753509.svg"></a></div></form></nav><section id="main-content" class="content"><div class="main-heading"><h1 class="fqn">Crate <a class="mod" href="#">simd_json</a><button id="copy-path" onclick="copy_path(this)" title="Copy item path to clipboard"><img src="../static.files/clipboard-7571035ce49a181d.svg" width="19" height="18" alt="Copy item path"></button></h1><span class="out-of-band"><a class="srclink" href="../src/simd_json/lib.rs.html#1-1923">source</a> · <button id="toggle-all-docs" title="collapse all docs">[<span>&#x2212;</span>]</button></span></div><details class="rustdoc-toggle top-doc" open><summary class="hideme"><span>Expand description</span></summary><div class="docblock"><p>simd-json is a rust port of the simdjson c++ library. It follows
most of the design closely with a few exceptions to make it better
fit into the rust ecosystem.</p>
<p>Note: by default rustc will compile for compatibility, not
performance, to take advantage of the simd part of simd json. You
have to use a native cpu target on a avx2 capable host system. An
example how to do this can be found in the <code>.cargo</code> directory on
<a href="https://github.com/simd-lite/simd-json">github</a>.</p>
<h3 id="goals"><a href="#goals">Goals</a></h3>
<p>the goal of the rust port of simdjson is not to create a one to
one copy, but to integrate the principles of the c++ library into
a rust library that plays well with the rust ecosystem. As such
we provide both compatibility with serde as well as parsing to a
dom to manipulate data.</p>
<h3 id="performance"><a href="#performance">Performance</a></h3>
<p>As a rule of thumb this library tries to get as close as possible
to the performance of the c++ implementation, but some of the
design decisions - such as parsing to a dom or a tape, weigh
ergonomics over performance. In other places Rust makes it harder
to achieve the same level of performance.</p>
<h3 id="safety"><a href="#safety">Safety</a></h3>
<p>this library uses unsafe all over the place, and while it leverages
quite a few test cases along with property based testing, please use
this library with caution.</p>
<h3 id="features"><a href="#features">Features</a></h3>
<p>simd-json.rs comes with a number of features that can be toggled,
the following features are intended for ‘user’ selection. Additional
features in the <code>Cargo.toml</code> exist to work around cargo limitations.</p>
<h4 id="swar-number-parsing-default"><a href="#swar-number-parsing-default"><code>swar-number-parsing</code> (default)</a></h4>
<p>Enables a parsing method that will parse 8 digits at a time for
floats - this is a common pattern but comes as a slight perf hit
if all the floats have less then 8 digits.</p>
<h4 id="serde_impl-default"><a href="#serde_impl-default"><code>serde_impl</code> (default)</a></h4>
<p>Compatibility with <a href="https://serde.rs/">serde</a>. This allows to use
<a href="https://simd-json.rs">simd-json.rs</a> to deserialize serde objects
as well as serde compatibility of the different Value types.
This can be disabled if serde is not used alongside simd-json.</p>
<h4 id="128bit"><a href="#128bit"><code>128bit</code></a></h4>
<p>Support for signed and unsigned 128 bit integer. This feature
is disabled by default as 128 bit integers are rare in the wild
and parsing them comes as a performance penalty due to extra logic
and a changed memory layout.</p>
<h4 id="known-key"><a href="#known-key"><code>known-key</code></a></h4>
<p>The known-key feature changes hasher for the objects, from ahash
to fxhash, ahash is faster at hashing and provides protection
against DOS attacks by forcing multiple keys into a single hashing
bucket. fxhash on the other hand allows for repeatable hashing
results, that allows memorizing hashes for well know keys and saving
time on lookups. In workloads that are heavy at accessing some well
known keys this can be a performance advantage.</p>
<h3 id="usage"><a href="#usage">Usage</a></h3>
<p>simd-json offers two main entry points for usage:</p>
<h4 id="values-api"><a href="#values-api">Values API</a></h4>
<p>The values API is a set of optimized DOM objects that allow parsed
json to JSON data that has no known variable structure. simd-lite
has two versions of this:</p>
<p><strong>Borrowed Values</strong></p>

<div class="example-wrap"><pre class="rust rust-example-rendered"><code><span class="kw">use </span>simd_json;
<span class="kw">let </span><span class="kw-2">mut </span>d = <span class="string">br#&quot;{&quot;some&quot;: [&quot;key&quot;, &quot;value&quot;, 2]}&quot;#</span>.to_vec();
<span class="kw">let </span>v: simd_json::BorrowedValue = simd_json::to_borrowed_value(<span class="kw-2">&amp;mut </span>d).unwrap();</code></pre></div>
<p><strong>Owned Values</strong></p>

<div class="example-wrap"><pre class="rust rust-example-rendered"><code><span class="kw">use </span>simd_json;
<span class="kw">let </span><span class="kw-2">mut </span>d = <span class="string">br#&quot;{&quot;some&quot;: [&quot;key&quot;, &quot;value&quot;, 2]}&quot;#</span>.to_vec();
<span class="kw">let </span>v: simd_json::OwnedValue = simd_json::to_owned_value(<span class="kw-2">&amp;mut </span>d).unwrap();</code></pre></div>
<h4 id="serde-compatible-api"><a href="#serde-compatible-api">Serde Compatible API</a></h4>
<div class="example-wrap ignore"><div class='tooltip'>ⓘ</div><pre class="rust rust-example-rendered"><code><span class="kw">use </span>simd_json;
<span class="kw">use </span>serde_json::Value;

<span class="kw">let </span><span class="kw-2">mut </span>d = <span class="string">br#&quot;{&quot;some&quot;: [&quot;key&quot;, &quot;value&quot;, 2]}&quot;#</span>.to_vec();
<span class="kw">let </span>v: Value = simd_json::serde::from_slice(<span class="kw-2">&amp;mut </span>d).unwrap();</code></pre></div>
</div></details><h2 id="reexports" class="small-section-header"><a href="#reexports">Re-exports</a></h2><div class="item-table"><div class="item-row"><div class="item-left import-item" id="reexport.from_reader"><code>pub use crate::serde::<a class="fn" href="serde/fn.from_reader.html" title="fn simd_json::serde::from_reader">from_reader</a>;</code></div></div><div class="item-row"><div class="item-left import-item" id="reexport.from_slice"><code>pub use crate::serde::<a class="fn" href="serde/fn.from_slice.html" title="fn simd_json::serde::from_slice">from_slice</a>;</code></div></div><div class="item-row"><div class="item-left import-item" id="reexport.from_str"><code>pub use crate::serde::<a class="fn" href="serde/fn.from_str.html" title="fn simd_json::serde::from_str">from_str</a>;</code></div></div><div class="item-row"><div class="item-left import-item" id="reexport.Node"><code>pub use crate::tape::<a class="enum" href="value/tape/enum.Node.html" title="enum simd_json::value::tape::Node">Node</a>;</code></div></div><div class="item-row"><div class="item-left import-item" id="reexport.Tape"><code>pub use crate::tape::<a class="struct" href="value/tape/struct.Tape.html" title="struct simd_json::value::tape::Tape">Tape</a>;</code></div></div><div class="item-row"><div class="item-left import-item" id="reexport.Result"><code>pub use crate::<a class="type" href="type.Result.html" title="type simd_json::Result">Result</a>;</code></div></div><div class="item-row"><div class="item-left import-item"><code>pub use crate::<a class="mod" href="value/index.html" title="mod simd_json::value">value</a>::*;</code></div></div></div><h2 id="modules" class="small-section-header"><a href="#modules">Modules</a></h2><div class="item-table"><div class="item-row"><div class="item-left module-item"><a class="mod" href="cow/index.html" title="simd_json::cow mod">cow</a></div><div class="item-right docblock-short">Reexport of Cow
Reexport of Cow</div></div><div class="item-row"><div class="item-left module-item"><a class="mod" href="prelude/index.html" title="simd_json::prelude mod">prelude</a></div><div class="item-right docblock-short">Default trait imports;</div></div><div class="item-row"><div class="item-left module-item"><a class="mod" href="serde/index.html" title="simd_json::serde mod">serde</a></div><div class="item-right docblock-short">serde related helper functions</div></div><div class="item-row"><div class="item-left module-item"><a class="mod" href="value/index.html" title="simd_json::value mod">value</a></div><div class="item-right docblock-short">simd-json JSON-DOM value</div></div></div><h2 id="macros" class="small-section-header"><a href="#macros">Macros</a></h2><div class="item-table"><div class="item-row"><div class="item-left module-item"><a class="macro" href="macro.json.html" title="simd_json::json macro">json</a></div><div class="item-right docblock-short">Taken from: <a href="https://github.com/serde-rs/json/blob/5b5f95831d9e0d769367b30b76a686339bffd209/src/macros.rs">https://github.com/serde-rs/json/blob/5b5f95831d9e0d769367b30b76a686339bffd209/src/macros.rs</a>
Construct a <code>simd_json::Value</code> from a JSON literal.</div></div><div class="item-row"><div class="item-left module-item"><a class="macro" href="macro.json_typed.html" title="simd_json::json_typed macro">json_typed</a></div><div class="item-right docblock-short">Adapted from: <a href="https://github.com/serde-rs/json/blob/5b5f95831d9e0d769367b30b76a686339bffd209/src/macros.rs">https://github.com/serde-rs/json/blob/5b5f95831d9e0d769367b30b76a686339bffd209/src/macros.rs</a>
Constructs a <code>simd_json::Value</code> from a JSON literal and allows specifying whether it generates
an owned or borrowed variant.</div></div><div class="item-row"><div class="item-left module-item"><a class="macro" href="macro.likely.html" title="simd_json::likely macro">likely</a></div><div class="item-right docblock-short">possible compiler hint that a branch is likely</div></div><div class="item-row"><div class="item-left module-item"><a class="macro" href="macro.static_cast_i8.html" title="simd_json::static_cast_i8 macro">static_cast_i8</a></div><div class="item-right docblock-short">static cast to an i8</div></div><div class="item-row"><div class="item-left module-item"><a class="macro" href="macro.static_cast_i32.html" title="simd_json::static_cast_i32 macro">static_cast_i32</a></div><div class="item-right docblock-short">static cast to an i32</div></div><div class="item-row"><div class="item-left module-item"><a class="macro" href="macro.static_cast_i64.html" title="simd_json::static_cast_i64 macro">static_cast_i64</a></div><div class="item-right docblock-short">static cast to an i64</div></div><div class="item-row"><div class="item-left module-item"><a class="macro" href="macro.static_cast_i128.html" title="simd_json::static_cast_i128 macro">static_cast_i128</a></div><div class="item-right docblock-short">static cast to an i64</div></div><div class="item-row"><div class="item-left module-item"><a class="macro" href="macro.static_cast_u32.html" title="simd_json::static_cast_u32 macro">static_cast_u32</a></div><div class="item-right docblock-short">static cast to an u32</div></div><div class="item-row"><div class="item-left module-item"><a class="macro" href="macro.static_cast_u64.html" title="simd_json::static_cast_u64 macro">static_cast_u64</a></div><div class="item-right docblock-short">static cast to an u64</div></div><div class="item-row"><div class="item-left module-item"><a class="macro" href="macro.stry.html" title="simd_json::stry macro">stry</a></div><div class="item-right docblock-short">FROM serde-json
We only use our own error type; no need for From conversions provided by the
standard library’s try! macro. This reduces lines of LLVM IR by 4%.</div></div><div class="item-row"><div class="item-left module-item"><a class="macro" href="macro.unlikely.html" title="simd_json::unlikely macro">unlikely</a></div><div class="item-right docblock-short">possible compiler hint that a branch is unlikely</div></div></div><h2 id="structs" class="small-section-header"><a href="#structs">Structs</a></h2><div class="item-table"><div class="item-row"><div class="item-left module-item"><a class="struct" href="struct.AlignedBuf.html" title="simd_json::AlignedBuf struct">AlignedBuf</a></div><div class="item-right docblock-short">SIMD aligned buffer</div></div><div class="item-row"><div class="item-left module-item"><a class="struct" href="struct.Deserializer.html" title="simd_json::Deserializer struct">Deserializer</a></div><div class="item-right docblock-short">Deserializer struct to deserialize a JSON</div></div><div class="item-row"><div class="item-left module-item"><a class="struct" href="struct.Error.html" title="simd_json::Error struct">Error</a></div><div class="item-right docblock-short">Parser error</div></div><div class="item-row"><div class="item-left module-item"><a class="struct" href="struct.KnownKey.html" title="simd_json::KnownKey struct">KnownKey</a></div><div class="item-right docblock-short">Well known key that can be looked up in a <code>Value</code> faster.
It achieves this by memorizing the hash.</div></div></div><h2 id="enums" class="small-section-header"><a href="#enums">Enums</a></h2><div class="item-table"><div class="item-row"><div class="item-left module-item"><a class="enum" href="enum.ErrorType.html" title="simd_json::ErrorType enum">ErrorType</a></div><div class="item-right docblock-short">Error types encountered while parsing</div></div><div class="item-row"><div class="item-left module-item"><a class="enum" href="enum.KnownKeyError.html" title="simd_json::KnownKeyError enum">KnownKeyError</a></div><div class="item-right docblock-short">Error for known keys</div></div><div class="item-row"><div class="item-left module-item"><a class="enum" href="enum.StaticNode.html" title="simd_json::StaticNode enum">StaticNode</a></div><div class="item-right docblock-short">Static tape node</div></div><div class="item-row"><div class="item-left module-item"><a class="enum" href="enum.ValueType.html" title="simd_json::ValueType enum">ValueType</a></div><div class="item-right docblock-short">Types of JSON values</div></div></div><h2 id="functions" class="small-section-header"><a href="#functions">Functions</a></h2><div class="item-table"><div class="item-row"><div class="item-left module-item"><a class="fn" href="fn.to_string.html" title="simd_json::to_string fn">to_string</a></div><div class="item-right docblock-short">Write a value to a string</div></div><div class="item-row"><div class="item-left module-item"><a class="fn" href="fn.to_string_pretty.html" title="simd_json::to_string_pretty fn">to_string_pretty</a></div><div class="item-right docblock-short">Write a value to a string</div></div><div class="item-row"><div class="item-left module-item"><a class="fn" href="fn.to_tape.html" title="simd_json::to_tape fn">to_tape</a></div><div class="item-right docblock-short">Creates a tape from the input for later consumption</div></div><div class="item-row"><div class="item-left module-item"><a class="fn" href="fn.to_vec.html" title="simd_json::to_vec fn">to_vec</a></div><div class="item-right docblock-short">Write a value to a vector</div></div><div class="item-row"><div class="item-left module-item"><a class="fn" href="fn.to_vec_pretty.html" title="simd_json::to_vec_pretty fn">to_vec_pretty</a></div><div class="item-right docblock-short">Write a value to a vector</div></div><div class="item-row"><div class="item-left module-item"><a class="fn" href="fn.to_writer.html" title="simd_json::to_writer fn">to_writer</a></div><div class="item-right docblock-short">Write a value to a string</div></div><div class="item-row"><div class="item-left module-item"><a class="fn" href="fn.to_writer_pretty.html" title="simd_json::to_writer_pretty fn">to_writer_pretty</a></div><div class="item-right docblock-short">Write a value to a string</div></div></div><h2 id="types" class="small-section-header"><a href="#types">Type Definitions</a></h2><div class="item-table"><div class="item-row"><div class="item-left module-item"><a class="type" href="type.Result.html" title="simd_json::Result type">Result</a></div><div class="item-right docblock-short">simd-json Result type</div></div></div></section></div></main><div id="rustdoc-vars" data-root-path="../" data-static-root-path="../static.files/" data-current-crate="simd_json" data-themes="" data-resource-suffix="" data-rustdoc-version="1.67.0-nightly (70f8737b2 2022-11-23)" data-search-js="search-df80cc3cb87b6482.js" data-settings-js="settings-7e1cf5cc683233f7.js" data-settings-css="settings-af96d9e2fc13e081.css" ></div></body></html>